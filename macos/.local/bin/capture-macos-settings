#!/usr/bin/env bash

# Script to help capture your current macOS settings
# Run this to see the current values, then add them to .macos
# Usage: ~/dotfiles/macos/.local/bin/capture-macos-settings

set -euo pipefail

echo "=== Trackpad Settings ==="
echo "Trackpad scaling (speed):"
defaults read -g com.apple.trackpad.scaling 2>/dev/null || echo "Not set"
echo ""
echo "Tap to click:"
defaults read com.apple.driver.AppleBluetoothMultitouch.trackpad Clicking 2>/dev/null || echo "Not set"
echo ""
echo "Three finger drag:"
defaults read com.apple.driver.AppleBluetoothMultitouch.trackpad TrackpadThreeFingerDrag 2>/dev/null || echo "Not set"
echo ""

echo "=== Keyboard Settings ==="
echo "Key repeat rate:"
defaults read -g KeyRepeat 2>/dev/null || echo "Not set"
echo ""
echo "Initial key repeat:"
defaults read -g InitialKeyRepeat 2>/dev/null || echo "Not set"
echo ""

echo "=== Dock Settings ==="
echo "Dock autohide:"
defaults read com.apple.dock autohide 2>/dev/null || echo "Not set"
echo ""
echo "Dock size:"
defaults read com.apple.dock tilesize 2>/dev/null || echo "Not set"
echo ""
echo "Minimize effect:"
defaults read com.apple.dock mineffect 2>/dev/null || echo "Not set"
echo ""
echo "Show recent apps:"
defaults read com.apple.dock show-recents 2>/dev/null || echo "Not set"
echo ""

echo "=== Finder Settings ==="
echo "Show hidden files:"
defaults read com.apple.finder AppleShowAllFiles 2>/dev/null || echo "Not set"
echo ""
echo "Show file extensions:"
defaults read -g AppleShowAllExtensions 2>/dev/null || echo "Not set"
echo ""
echo "Show path bar:"
defaults read com.apple.finder ShowPathbar 2>/dev/null || echo "Not set"
echo ""
echo "Default view style:"
defaults read com.apple.finder FXPreferredViewStyle 2>/dev/null || echo "Not set"
echo ""

echo "=== Screenshot Settings ==="
echo "Screenshot location:"
defaults read com.apple.screencapture location 2>/dev/null || echo "Not set"
echo ""
echo "Screenshot format:"
defaults read com.apple.screencapture type 2>/dev/null || echo "Not set"
echo ""
echo "Show thumbnail:"
defaults read com.apple.screencapture show-thumbnail 2>/dev/null || echo "Not set"
echo ""

echo "=== Mission Control ==="
echo "Don't rearrange spaces:"
defaults read com.apple.dock mru-spaces 2>/dev/null || echo "Not set"
echo ""

echo "=== Menu Bar ==="
echo "Show battery percentage:"
defaults read com.apple.menuextra.battery ShowPercent 2>/dev/null || echo "Not set"
echo ""

echo "=== Other Settings ==="
echo "Disable auto-correct:"
defaults read -g NSAutomaticSpellingCorrectionEnabled 2>/dev/null || echo "Not set"
echo ""
echo "Expand save panel by default:"
defaults read -g NSNavPanelExpandedStateForSaveMode 2>/dev/null || echo "Not set"
echo ""
echo "Disable press-and-hold for keys:"
defaults read -g ApplePressAndHoldEnabled 2>/dev/null || echo "Not set"
echo ""

echo "=== To explore a specific domain ==="
echo "Run: defaults read <domain>"
echo "Example: defaults read com.apple.dock"
echo ""
echo "To find all domains:"
echo "defaults domains | tr ',' '\n'"
